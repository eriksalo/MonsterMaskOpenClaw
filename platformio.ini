; PlatformIO build configuration for Monster M4SK Eyes
; Board: Adafruit Monster M4SK (SAMD51J19, 120MHz Cortex-M4)

[platformio]
src_dir = M4_Eyes

[env:monster_m4sk]
platform = atmelsam
board = adafruit_monster_m4sk
framework = arduino

; TinyUSB is required by the sketch
; SPI include path needed globally because TinyUSB 3.x includes USB Host header that needs SPI.h
build_flags =
    -DUSE_TINYUSB
    -IC:/Users/erik/.platformio/packages/framework-arduino-samd-adafruit/libraries/SPI
    -IC:/Users/erik/.platformio/packages/framework-arduino-samd-adafruit/libraries/Wire

; Deep+ mode needed so library deps (ZeroDMA->TinyUSB->SPI) resolve correctly
lib_ldf_mode = deep+
; All library include paths available to all libraries (needed for transitive SPI.h)
lib_compat_mode = off

; Exclude the disabled user_*.cpp variants (they are #if 0 but LDF still scans includes)
build_src_filter =
    +<*>
    -<user_hid.cpp>
    -<user_fizzgig.cpp>
    -<user_neopixel.cpp>
    -<user_pir.cpp>
    -<user_touchneopixels.cpp>
    -<user_watch.cpp>

; USBHost is broken on SAMD51 in this framework version and only needed by user_hid
lib_ignore =
    USBHost

lib_deps =
    adafruit/Adafruit Arcada Library
    adafruit/Adafruit GFX Library
    adafruit/Adafruit BusIO
    adafruit/Adafruit SPIFlash
    adafruit/Adafruit ImageReader Library
    adafruit/Adafruit ST7735 and ST7789 Library
    adafruit/Adafruit Zero DMA Library
    adafruit/Adafruit TinyUSB Library
    adafruit/Adafruit NeoPixel
    adafruit/Adafruit Unified Sensor
    adafruit/Adafruit LIS3DH
    bblanchon/ArduinoJson
    adafruit/SdFat - Adafruit Fork
